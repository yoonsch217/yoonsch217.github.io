---
layout: default
title: ARP Cache Table
nav_order: 2
parent: network
---

## ARP Cache Table

https://medium.com/pocs/tcp-ip-%EC%9D%B4%EB%A1%A0-arp-%EC%BA%90%EC%8B%9C-%ED%85%8C%EC%9D%B4%EB%B8%94-1e07ab2ae28d

IP 주소: 32비트 가변 네트워크 ID와 호스트 ID로 이루어져 있다.
MAC 주소: 48비트 크기의 고정적인 OUT과 일련번호로 이루어져 있다.

IP 주소와 MAC 주소를 연결해주는 게 ARP 테이블

### ARP: Address Resolution Protocol

마치 DNS 서비스 기능과 같이 IP 주소와 MAC 주소를 매팽해주는 기능을 한다.

- 사용자 컴퓨터 주소(192.168.0.4)에서 목적지 IP 8.8.8.8로 ping 전송하는 경우
  - 출발지와 목적지 IP의 네트워크 ID를 비교한다.
  - 네트워크 ID가 다르다면 다른 LAN 영역에 접속을 하려는 것이다.
  - 다른 영역의 LAN에 접속하기 위해서는 라우터를 통해서 가야하기 때문에 목적지 IP를 라우터의 IP주소로 설정한다.
    사용자 기준의 라우터 IP 주소 192.168.0.1로 목적지가 설정된다.
  - 같은 LAN 영역에서는 스위칭을 통해 통신해야한다.
    이는 물리적 주소(MAC 주소)를 이용해야하기 때문에 ARP 캐시 테이블을 찾아가 목적지에 해당하는 맥 주소가 있는지 확인한다.
  - 맥 주소가 ARP 캐시 테이블에 등록되어 있다면 목적지인 라우터에 해당하는 맥 주소로 스위칭 통신을 하면 된다.
  - 맥 주소가 등록되어 있지 않다면, 출발지 호스트는 같은 영역의 LAN에 연결되어 있는 모든 호스트들에게 ARP 질의를 브로드캐스트 방식으로 전송한다.
    해당 IP에 해당하는 호스트가 unicast 방식으로 본인의 맥 주소를 전송해준다.
  - OS가 테이블을 참조하여 unicast 방식으로 데이터를 게이트웨이까지 전송한다.
  - 게이트웨이가 IP를 이용해 라우팅 통신 기법으로 원래 목적지인 8.8.8.8로 연결을 진행한다.
